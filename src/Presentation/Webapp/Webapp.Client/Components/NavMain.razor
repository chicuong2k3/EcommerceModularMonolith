

<Menubar>
    <MenubarItem Root="Account" OnClick="ShowMenuOnClick" OnMouseOver="ShowMenu">
        <MenuGroup Items="@account" Style="width: fit-content" Show="@showMenu" OnSelect="HandleMenuSelection" />
    </MenubarItem>
</Menubar>

@code {
    private List<MenuItemOption> account = [];

    private MenuItemOption? selected;
    private bool showMenu;

    protected override void OnInitialized()
    {
        account.Add(new MenuItemOption("Switch Account") { MenuType = MenuType.Checkbox, ShowCheckmark = false });
        account.Add(new(""));
        account.Add(new MenuItemOption("Andy") { MenuType = MenuType.Radio, Value = "1", RadioGroup = "Profiles" });
        account.Add(new MenuItemOption("Benoit") { MenuType = MenuType.Radio, Value = "2", RadioGroup = "Profiles", Checked = true });
        account.Add(new MenuItemOption("Luis") { MenuType = MenuType.Radio, Value = "3", RadioGroup = "Profiles" });
        account.Add(new(""));
        account.Add(new MenuItemOption("Manage Family...") { MenuType = MenuType.Checkbox, ShowCheckmark = false });
        account.Add(new(""));
        account.Add(new MenuItemOption("Add Account...") { MenuType = MenuType.Checkbox, ShowCheckmark = false });
    }

    private async Task HandleMenuSelection(MenuItemOption menu)
    {
        selected = menu;
        await browserExtensions.EvalVoid("document.activeElement.parentNode.click()");
        showMenu = false;
    }

    private void ShowMenuOnClick() => showMenu = !showMenu;
    private void ShowMenu() => showMenu = showMenu ? true : false;
}